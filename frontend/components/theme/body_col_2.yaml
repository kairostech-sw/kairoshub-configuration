type: "custom:mod-card"
card_mod:
  style:
    .: |
      ha-card {
        width: 385px;
      }
    tabbed-card $:
      .: |
        {% if is_state("sensor.umidita", "unknown")%}
          mwc-tab[label='Umidità'] {
            display: none;
          }
        {% endif %}
      mwc-tab:
        $:
          mwc-tab-indicator $: |
            .mdc-tab-indicator__content--underline {
              border-color: var(--command-state-active-color) !important;
            }
          .: |
            .mdc-tab__text-label {
              font-size: 0px !important;
            }
            .mdc-tab__text-label:after {
              font-size: 16px;
              text-transform: none;
              display: block;
            }
            .mdc-tab--active {
              background: #FFFFFF !important;
            }
        .: |
          mwc-tab:not(:last-child) {
            border-color: #000000;
            border-width: 0px;
            border-right-width: 1px;
            border-style: solid;
            overflow: hidden;
          }
          mwc-tab[label="Temperatura"] {
            {% if (states("sensor.temperatura") | float > 24.0) %}
              --mdc-theme-primary: var(--temperature-primary-color);
            {% elif (states("sensor.temperatura") | float > 18.0) %}
              --mdc-theme-primary: var(--temperature-tertiary-color)
            {% else %}
              --mdc-theme-primary: var(--temperature-secondary-color)
            {% endif %}
          }
      mwc-tab:nth-child(1) $: |
        .mdc-tab__text-label:after {
          content: "{{states('sensor.temperatura')}}°C";
        }
      mwc-tab:nth-child(2) $: |
        .mdc-tab__text-label:after {
          content: "{{states('sensor.umidita')}}%";
        }
      mwc-tab:nth-child(3) $: |
        .mdc-tab__text-label:after {
          content: "{{states('sensor.em_assorbimento')}}W";
        }
card:
  type: "custom:tabbed-card"
  styles:
    --mdc-typography-button-font-size: 11px
  tabs:
    - attributes:
        label: "Temperatura"
        icon: "mdi:thermometer"
      card:
        type: "custom:mini-graph-card"
        entities:
          - sensor.temperatura
        color_thresholds_transition: hard
        color_thresholds:
          - value: 18
            color: var(--temperature-secondary-color)
          - "#FFA500"
          - value: 25
            color: var(--temperature-primary-color)
        <<: &graph-config
          hours_to_show: 24
          aggregate_func: avg
          points_per_hour: 1
          align_state: center
          height: 160
          line_width: 3
          hour24: true
          animate: true
          decimals: 1
          show:
            icon: false
            name: false
            points: false
            labels: true
            extrema: true
            fulldate: true
          tap_action:
            action: none
          card_mod:
            style: |
              .info.flex {
                margin-top: -60px;
              }
              .state {
                margin: 0px auto;
              }
              .graph {
                margin-right: 0.5em;
              }
              .info.flex div.info__item:nth-child(2) .info__item__value,
              .info.flex div.info__item:nth-child(2) .info__item__type {
                color: red;
              }
    - attributes:
        label: "Umidità"
        icon: "mdi:water-percent"
      styles:
        --mdc-theme-primary: var(--humidity-primary-color)
      card:
        type: "custom:mini-graph-card"
        entities:
          - sensor.umidita
        line_color: var(--humidity-primary-color)
        <<: *graph-config
    - attributes:
        label: "Consumi"
        icon: "mdi:lightning-bolt"
      styles:
        --mdc-theme-primary: "#E6C300"
      card:
        type: "custom:mini-graph-card"
        entities:
          - sensor.em_assorbimento
        line_color: var(--energy-consume-primary-color)
        <<: *graph-config
