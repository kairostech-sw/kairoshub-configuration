########################
### PICTURE ELEMENTS ###
########################

pic_label_stato_operativo:
  template:
    - no_background
  show_icon: false
  show_state: false
  styles:
    name:
      - justify-self: start
      - font-size: 120%
    card:
      - border-radius: 0px
      - padding: 0px
  state:
    - value: 'on'
      name: IN FUNZIONE
      styles:
        name:
          - color: var(--paper-item-icon-active-color)
          - font-weight: bold
    - value: 'off'
      name: SPENTA
      styles:
        name:
          - color: var(--secondary-text-color)

pic_icon_stato_operativo_lavatrice:
  template:
    - no_background
  show_name: false
  show_state: false
  show_icon: true
  styles:
    card:
      - border-radius: 0px
  state:
    - value: 'on'
      icon: 'mdi:washing-machine'
      styles:
        icon:
          - color: var(--paper-item-icon-active-color)
    - value: 'off'
      icon: 'mdi:washing-machine-off'
      styles:
        icon:
          - color: var(--secondary-text-color)

pic_icon_stato_operativo_lavastoviglie:
  template:
    - no_background
  show_name: false
  show_state: false
  show_icon: true
  styles:
    card:
      - border-radius: 0px
  state:
    - value: 'on'
      icon: 'mdi:dishwasher'
      styles:
        icon:
          - color: var(--paper-item-icon-active-color)
    - value: 'off'
      icon: 'mdi:dishwasher-off'
      styles:
        icon:
          - color: var(--secondary-text-color)

pic_icon_stato_operativo_asciugatrice:
  template:
    - no_background
  show_name: false
  show_state: false
  show_icon: true
  styles:
    card:
      - border-radius: 0px
  state:
    - value: 'on'
      icon: 'mdi:tumble-dryer'
      styles:
        icon:
          - color: var(--paper-item-icon-active-color)
    - value: 'off'
      icon: 'mdi:tumble-dryer-off'
      styles:
        icon:
          - color: var(--secondary-text-color)

pic_label_fase_operativa:
  show_icon: false
  template: no_background
  name: Riscaldamento Acqua
  styles:
    name:
      - font-size: 110%
      - justify-self: start

    card:
      - border-radius: 0px
      - padding: 0px

pic_label_tempo_ciclo:
  template: no_background
  show_icon: false
  show_state: true
  show_name: false
  styles:
    card:
      - border-radius: 0px
      - padding: 0px
    state:
      - justify-self: start
      - font-size: 110%
      - font-weight: bold

pic_label_consumo:
  template: no_background
  show_icon: false
  show_state: true
  show_name: false
  styles:
    card:
      - border-radius: 0px
      - padding: 0px
    state:
      - justify-self: start
      - font-size: 95%

feedback_click:
  styles:
    card:
      - '--mdc-ripple-color': var(--paper-item-icon-active-color)
      - '--mdc-ripple-press-opacity': 0.2

#######################
### ACTION TEMPLATE ###
#######################

action_var:
  entity: var.spotify_var_room
  styles:
    card:
      - height: 80px
    name:
      - margin-bottom: 5px
  tap_action:
    action: call-service
    service: script.spotify_set_room
    service_data:
      room: '[[[ return variables.room ]]]'
  state:
    - value: '[[[ return variables.room ]]]'
      styles:
        icon:
          - color: var(--paper-item-icon-active-color)
          - font-weight: bold
        name:
          - color: var(--paper-item-icon-active-color)
          - font-weight: bold

action_var_echo_entity:
  entity: var.alexa_echo_entity
  styles:
    card:
      - height: 80px
    name:
      - margin-bottom: 5px
  tap_action:
    action: call-service
    service: var.set
    service_data:
      entity_id: var.alexa_echo_entity
      value: '[[[ return variables.echo_entity ]]]'
  state:
    - value: '[[[ return variables.echo_entity ]]]'
      styles:
        icon:
          - color: var(--paper-item-icon-active-color)
          - font-weight: bold
        name:
          - color: var(--paper-item-icon-active-color)
          - font-weight: bold

action_state_numeric:
  state:
    - value: 0
      operator: '>'
      styles:
        icon:
          - color: var(--paper-item-icon-active-color)

action_turn_off:
  state:
    - value: 'off'
      styles:
        icon:
          - color: var(--disabled-text-color)
        name:
          - color: var(--disabled-text-color)
  icon: 'mdi:power'
  tap_action:
    action: call-service
    service: homeassistant.turn_off
    service_data:
      entity_id: '[[[ return entity.entity_id ]]]'
action_state_off:
  state:
    - value: 'off'
      styles:
        icon:
          - color: var(--disabled-text-color)
        name:
          - color: var(--disabled-text-color)
action_state_number_off:
  state:
    - value: 0
      styles:
        icon:
          - color: var(--disabled-text-color)
        name:
          - color: var(--disabled-text-color)
    - value: 0
      operator: '>'
      styles:
        icon:
          - color: red
action_turn_scene:
  template: feedback_click
  tap_action:
    action: call-service
    service: scene.turn_on
    service_data:
      entity_id: '[[[ return entity.entity_id ]]]'

#######################
### BUTTON TEMPLATE ###
#######################

button_home:
  template: feedback_click
  layout: icon_name
  name: GO TO HOME
  styles:
    card:
      - height: 70px
    name:
      - justify-self: left
  icon: 'phu:routinesComingHome'
  tap_action:
    action: navigate
    navigation_path: /lovelace-tablet/home
button_footer:
  template: feedback_click
  layout: icon_name
  styles:
    card:
      - height: 70px
    name:
      - justify-self: left
button_icon_square:
  template: feedback_click
  size: 60%
  show_name: false
  aspect_ratio: 1/1
button_text_square:
  template: feedback_click
  size: 60%
  show_icon: false
  aspect_ratio: 1/1
button_horizontal:
  layout: icon_name
  show_icon: true
  styles:
    card:
      - height: 50px
    name:
      - padding-right: 5px
button_routine_home:
  template:
    - button_horizontal
    - feedback_click
  size: 50%
  styles:
    grid:
      - grid-template-columns: 30% 1fr
    name:
      - color: var(--secondary-text-color)
    icon:
      - color: var(--secondary-text-color)
    tap_action:
      action: call-service
      service: '[[[ return entity.entity_id ]]]'
button_channel:
  template: no_background
  show_icon: false
  show_name: false
  size: 70%
  show_entity_picture: true
  styles:
    card:
      - height: 90px
  entity_picture: '[[[ return "/local/tv_logos/" + variables.picture_name ]]]'
  tap_action:
    action: call-service
    service: '[[[ return "script.harmony_channel_" + variables.activity ]]]'
    service_data:
      canale: '[[[ return variables.channel ]]]'
button_radio:
  template: no_background
  show_icon: false
  show_name: false
  size: 60%
  show_entity_picture: true
  styles:
    card:
      - height: 90px
  entity_picture: '[[[ return "/local/radio_logos/" + variables.picture_name ]]]'
  tap_action:
    action: call-service
    service: media_player.play_media
    service_data:
      entity_id: '[[[ return "media_player." + states["var.alexa_echo_entity"].state ]]]'
      media_content_id: '[[[ return variables.stazione ]]]'
      media_content_type: TUNEIN
button_number_channel:
  template:
    - action_state_off
    - feedback_click
  entity: sensor.command_device
  show_name: false
  styles:
    card:
      - height: 60px
    icon:
      - width: 40px
  icon: '[[[ return "mdi:numeric-" + variables.number + "-circle" ]]]'
  tap_action:
    action: call-service
    service: script.harmony_command
    service_data:
      comando: '[[[ return variables.number ]]]'
button_text_label:
  template: feedback_click
  show_label: true
  show_icon: false
  styles:
    card:
      - height: 60px
    name:
      - font-size: 90%
      - color: var(--secondary-text-color)
      - margin-bottom: 2px
    label:
      - margin-top: 2px
      - font-weight: bold
button_icon_label:
  show_label: true
  show_state: false
  show_name: true
  styles:
    grid:
      - grid-template-areas: '"i l" "i n"'
      - grid-template-columns: 30% 1fr
      - grid-template-rows: 1fr 1fr
    card:
      - height: 60px
    label:
      - font-size: 90%
      - color: var(--secondary-text-color)
    name:
      - font-weight: bold
button_text:
  show_label: false
  show_icon: false
  styles:
    card:
      - height: 60px
    name:
      - font-weight: bold
button_menu:
  template:
    - button_text
    - feedback_click
  icon: 'mdi:power'
  styles:
    card:
      - background: 'rgba(25, 25, 25, 1)'
    name:
      - color: var(--secondary-text-color)
    icon:
      - color: var(--secondary-text-color)
header_button_menu:
  template:
    - feedback_click
  styles:
    card:
      # - background: "#DCDCDC"
      - box-shadow: 1px 5px 8px rgba(0, 0, 0, 0.3)
    name:
      - color: var(--primary-text-color)
      - font-weight: bold
    icon:
      - color: var(--primary-text-color)
button_light:
  color: auto
  styles:
    name:
      - margin-top: 5px
    label:
      - margin-top: 5px
      - font-size: 80%
      - color: var(--secondary-text-color)
  state:
    - value: 'off'
      styles:
        icon:
          - color: var(--disabled-text-color)
        label:
          - color: var(--disabled-text-color)
        name:
          - color: var(--secondary-text-color)
    - value: 'on'
      styles:
        name:
          - font-weight: bold
button_light_brightness:
  show_label: true
  label: |
    [[[
      if (entity.state === 'on' && entity.attributes.brightness)
      {
        const brightness = Math.round(entity.attributes.brightness / 2.54);
        return brightness + '<span style="font-size: 80%;">%</span>';
      } else {
        return '0%';
      }
    ]]]

######################
### POPUP TEMPLATE ###
######################

popup_light:
  hold_action:
    action: fire-dom-event
    browser_mod:
      command: popup
      title: '[[[ return entity.attributes.friendly_name ]]]'
      hide_header: true
      auto_close: false
      style:
        $: |
          .mdc-dialog .mdc-dialog__container {
            width: 100%;
          }
          .mdc-dialog .mdc-dialog__container .mdc-dialog__surface {
            width:100%;
            box-shadow:none;
          }
        .: |
          :host {
            --mdc-theme-surface: rgba(0,0,0,0);
            --secondary-background-color: rgba(0,0,0,0);
            --ha-card-background: rgba(0,0,0,0);
            --mdc-dialog-scrim-color: rgba(0,0,0,0.8);
            --mdc-dialog-min-height: 100%;
            --mdc-dialog-min-width: 100%;
            --mdc-dialog-max-width: 100%;
          }
          mwc-icon-button {
            color: #FFF;
          }
      card:
        type: 'custom:light-popup-card'
        entity: '[[[ return entity.entity_id ]]]'
        icon: 'mdi:led-strip'
        actionSize: 60px
        actions:
          - service: light.turn_on
            service_data:
              entity_id: '[[[ return entity.entity_id ]]]'
              color_temp: 153
            color: '#d8d9e1'
          - service: light.turn_on
            service_data:
              entity_id: '[[[ return entity.entity_id ]]]'
              color_temp: 326
            color: '#d5b08d'
          - service: light.turn_on
            service_data:
              entity_id: '[[[ return entity.entity_id ]]]'
              color_temp: 500
            color: '#ce944b'
popup_light_rgb:
  hold_action:
    action: fire-dom-event
    browser_mod:
      command: popup
      title: '[[[ return entity.attributes.friendly_name ]]]'
      hide_header: true
      auto_close: false
      style:
        $: |
          .mdc-dialog .mdc-dialog__container {
            width: 100%;
          }
          .mdc-dialog .mdc-dialog__container .mdc-dialog__surface {
            width:100%;
            box-shadow:none;
          }
        .: |
          :host {
            --mdc-theme-surface: rgba(0,0,0,0);
            --secondary-background-color: rgba(0,0,0,0);
            --ha-card-background: rgba(0,0,0,0);
            --mdc-dialog-scrim-color: rgba(0,0,0,0.8);
            --mdc-dialog-min-height: 100%;
            --mdc-dialog-min-width: 100%;
            --mdc-dialog-max-width: 100%;
          }
          mwc-icon-button {
            color: #FFF;
          }
      card:
        type: 'custom:light-popup-card'
        entity: '[[[ return entity.entity_id ]]]'
        icon: 'mdi:led-strip'
        actionSize: 60px
        settings:
          openButton: RGB
          closeButton: CHIUDI
        settingsCard:
          type: 'custom:light-entity-card'
          cardOptions:
            entity: '[[[ return entity.entity_id ]]]'
            brightness: false
            full_width_sliders: true
            hide_header: true
            show_slider_percent: true
            smooth_color_wheel: true
            consolidate_entities: true
        actions:
          - service: light.turn_on
            service_data:
              entity_id: '[[[ return entity.entity_id ]]]'
              color_temp: 153
            color: '#d8d9e1'
          - service: light.turn_on
            service_data:
              entity_id: '[[[ return entity.entity_id ]]]'
              color_temp: 326
            color: '#d5b08d'
          - service: light.turn_on
            service_data:
              entity_id: '[[[ return entity.entity_id ]]]'
              color_temp: 500
            color: '#ce944b'

#######################
### SENSOR TEMPLATE ###
#######################

sensor_card:
  layout: icon_name_state2nd
  show_state: true
  styles:
    card:
      - padding-top: 2%
      - padding-bottom: 2%
    state:
      - font-size: 140%
      - font-weight: bold
      - justify-self: start
      - align-self: center
    name:
      - font-size: 85%
      - justify-self: start
      - color: var(--secondary-text-color)
  tap_action:
    action: none
sensor_card_text:
  show_icon: false
  show_state: true
  styles:
    card:
      - height: 60px
    name:
      - font-size: 80%
      - color: var(--secondary-text-color)
    state:
      - font-size: 120%
      - font-weight: bold
  tap_action:
    action: none
sensor_person:
  label: Online
  layout: icon_name_state2nd
  show_icon: false
  show_entity_picture: true
  show_name: true
  show_state: true
  show_label: true
  styles:

    state:
      - font-size: 120%
    name:
      - font-size: 14px
      - font-weight: 500
      - color: var(--secondary-text-color)
    label:
      - margin-top: 8px
      - color: var(--secondary-text-color)
      - font-size: 80%
    entity_picture:
      - border-radius: 50%
      - width: 40px
  state:
    - value: home
      operator: '!='
      styles:
        state:
          - color: var(--paper-item-icon-active-color)

###########################
### LABEL & EMPTY CARDS ###
###########################

card_header:
  styles:
    card:
      - height: 80px
empty_card:
  template: no_background
  color_type: blank-card
row_space_5:
  template: no_background
  tap_action:
    action: none
  styles:
    card:
      - height: 5px
      - padding: 0px

row_space_10:
  template: no_background
  tap_action:
    action: none
  styles:
    card:
      - height: 10px
      - padding: 0px

row_space_15:
  template: no_background
  tap_action:
    action: none
  styles:
    card:
      - height: 15px
      - padding: 0px
row_space_20:
  template: no_background
  tap_action:
    action: none
  styles:
    card:
      - height: 20px
      - padding: 0px
row_space_25:
  template: no_background
  tap_action:
    action: none
  styles:
    card:
      - height: 25px
      - padding: 0px
row_space_30:
  template: no_background
  tap_action:
    action: none
  styles:
    card:
      - height: 30px
      - padding: 0px
row_space_35:
  template: no_background
  tap_action:
    action: none
  styles:
    card:
      - height: 35px
      - padding: 0px
row_space_40:
  template: no_background
  tap_action:
    action: none
  styles:
    card:
      - height: 40px
      - padding: 0px
row_space_80:
  template: no_background
  tap_action:
    action: none
  styles:
    card:
      - height: 80px
      - padding: 0px
no_background:
  styles:
    card:
      - background-color: 'rgba(0, 0, 0, 0.0)'
      - box-shadow: none

clima_template:
  styles:
    card:
      - background-color: 'rgba(0, 0, 0, 0.0)'
      - box-shadow: none
    states:
      - padding: 0px

label_left:
  styles:
    card:
      - padding: 5px 5px
      - margin-left: 4px
      - border-radius: 0px
    name:
      - justify-self: left
      - font-size: 120%
      - color: var(--secondary-text-color)
  template: no_background
  tap_action:
    action: none
label_center:
  styles:
    card:
      - padding: 5px 5px
    name:
      - justify-self: center
      - font-size: 120%
      - color: var(--secondary-text-color)
  template: no_background
  tap_action:
    action: none

on_off_buttoncard:
  template:
    - button_horizontal
    - feedback_click
  size: 50%
  styles:
    grid:
      - grid-template-columns: 30% 1fr
    card:
      - margin-top: 5px !important
      - height: 50px !important
      - box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.1)
      - transition: all 0.3s ease 0s
    name:
      - color: var(--secondary-text-color)
      - font-size: 15px
    tap_action:
      action: call-service
      service: '[[[ return entity.entity_id ]]]'
  state:
    - value: 'on'
      styles:
        icon:
          - color: var(--active-color)

#######################
### BUTTON TEMPLATE ###
#######################

clima_timepicker_template:
  hour_mode: 12
  embedded: true
  hide:
    name: false
  style: |
    ha-card > .time-picker-header {
      padding: 5px
    }

    ha-card > .time-picker-row {
      padding: 0px !important
    }

program_day_overview_theme:
  icon: 'mdi:calendar-blank-outline'
  state:
    - value: 'on'
      icon: 'mdi:calendar-check'
    - value: 'off'
      icon: 'mdi:calendar-remove'
  styles:
    card:
      - padding: 4%
      - color: var(--primary-text-color)
      - font-size: 10px
      - text-transform: capitalize
      - border-width: |
          [[[
          if (entity.state != 'on') return '0px';
          return '2px';
          ]]]
      - border-style: double
      - border-color: |
          [[[
            if (entity.state != 'on') return 'var(--paper-item-icon-color)';
            return 'var(--active-color)';
          ]]]
      - box-shadow: 1px 5px 8px rgba(0, 0, 0, 0.3)
    grid:
      - grid-template-areas: '"i onoff" "n n" "start start" "stop stop"'
      - grid-template-columns: 1fr 1fr
      - grid-template-rows: 1fr min-content min-content min-content
    name:
      - font-weight: bold
      - font-size: 16px
      - align-self: middle
      - justify-self: start
      - padding-bottom: 4px
      - padding-right: 5px
    img_cell:
      - justify-content: start
      - align-items: start
      - margin: none
    icon:
      - color: >
          [[[
            if (entity.state != 'on') return 'var(--paper-item-icon-color)';
              return 'var(--active-color)'
          ]]]
      - width: 50%
      - padding-top: 4px
      - margin-top: -10%
      - margin-left: 0%
    custom_fields:
      onoff:
        - align-self: start
        - justify-self: end
        - text-transform: uppercase
        - font-size: 20px
        - font-weight: bold
        - padding-right: 5px
        - color: >
            [[[
              if (entity.state != 'on') return 'var(--paper-item-icon-color)';
                return 'var(--active-color)'
            ]]]
      start:
        - padding-bottom: 2px
        - padding-right: 5px
        - align-self: middle
        - justify-self: start
        - font-size: 12px
      stop:
        - padding-bottom: 2px
        - align-self: middle
        - justify-self: start
        - padding-right: 5px
        - font-size: 12px
  custom_fields:
    onoff: >
      [[[
        return `<ha-icon
          icon="mdi:light"
          style="width: 14px; height: 14px; color: var(--active-color);">
          </ha-icon><span>${entity.state}</span>`
      ]]]
    start: >
            [[[
              return `<ha-icon
                icon="mdi:clock"
                style="width: 14px; height: 14px; color: var(--primary-color);">
                </ha-icon><span> Accensione :&nbsp;&nbsp;<span style="color: var(--text-color-sensor);">${states[ variables.thermostat_period_on ].state}</span></span>`
            ]]]
    stop: >
            [[[
              return `<ha-icon
                icon="mdi:clock"
                style="width: 14px; height: 14px; color: var(--primary-color);">
                </ha-icon><span> Spegnimento :&nbsp;<span style="color: var(--text-color-sensor);">${states[ variables.thermostat_period_off ].state}</span></span>`
            ]]]
  tap_action:
    action: navigate
    navigation_path: >
      [[[
        return '/lovelace-kairoshub/'+ variables.navigation_path
      ]]]


###################
# HEADER
header_page_text:
  type: 'custom:button-card'
  template: no_background
  show_icon: true
  show_label: true
  show_name: true
  show_state: false
  styles:
    card:
      - padding-top: 0px
    grid:
      - grid-template-areas: '"a b" "a c"'
      - grid-template-columns: 60px 1fr
      - grid-template-rows: min-content min-content
    state:
      - font-size: 120%
      - font-weight: bold
      - justify-self: center
      # - color: var(--paper-item-icon-active-color)
    name:
      - justify-self: left
      - font-size: 120%
      - font-weight: bold
      - color: var(--paper-item-icon-active-color)
      - grid-area: b
    label:
      - justify-self: left
      - font-size: 80%
      - grid-area: c
    img_cell:
      - grid-area: a
    icon:
      - width: 42px
      - height: 42px
      - color: var(--ha-card-header-color)
  tap_action:
    action: none

user_profile_header:
  type: 'custom:button-card'
  entity: person.utente
  template: no_background
  show_icon: false
  show_label: true
  show_name: false
  show_state: false
  show_entity_picture: true
  styles:
    card:
      - padding-top: 7px
    grid:
      - grid-template-areas: '"a" "b"'
      - grid-template-columns: 60px
      - grid-template-rows: min-content min-content
    label:

      - font-size: 80%
      - font-weight: bold
      - color: var(--paper-item-icon-active-color)
      - grid-area: b
    img_cell:
      - grid-area: a
    icon:
      - width: 32px
      - height: 32px
  tap_action:
    action: none

icon_state_header:
  type: 'custom:button-card'
  template: no_background
  show_icon: true
  show_label: true
  show_name: false
  show_state: false
  show_entity_picture: true
  styles:
    card:
      - padding-top: 7px
    grid:
      - grid-template-areas: '"a" "b" "c"'
      - grid-template-columns: 1fr
      - grid-template-rows: min-content min-content min-content
    label:
      - font-size: 80%
      - font-weight: bold
      - color: '#f4f4f4'
      - grid-area: b
    img_cell:
      - grid-area: a
    state:
      - grid-area: c
      - font-size: 90%
      - font-weight: bold
    icon:
      - width: 32px
      - height: 32px

user_notification_header:
  type: 'custom:button-card'
  entity: input_boolean.notification_to_read
  template: no_background
  show_icon: true
  show_label: true
  show_name: false
  show_state: false
  show_entity_picture: true
  entity_picture: |
   [[[
     if (entity.state == 'on' ) return '/local/images/notification.png'  ;
     if (entity.state == 'off' ) return '/local/images/bell.png';
     else return '';
   ]]]
  styles:
    card:
      - padding-top: 10px
    # label:
    #   - justify-content: end
    grid:
      - grid-template-areas: '"a"'
      - grid-template-columns: 60px
      - grid-template-rows: min-content min-content
    img_cell:
      - grid-area: a
      # - justify-content: end
    icon:
      - width: 32px
      - height: 32px
  tap_action:
    action: navigate
    navigation_path: /lovelace-kairoshub/notification

icon_clima:
  icon: 'mdi:calendar-check'
  state:
    - value: 'on'
      icon: mdi:calendar-check
      label: 'ON'
      color: var(--command-state-active-color)
    - value: 'off'
      icon: mdi:calendar-remove
      label: 'OFF'
      color: var(--command-state-color)

header_icon_clima:
  name: Programma caldo
  template:
    - icon_state_header
    - icon_clima
  entity: binary_sensor.heater_auto
  color: auto
  tap_action:
    action: none

button_hold:
  template: feedback_click
  styles:
    card:
      - box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.1)
      - border: solid 1px rgb(0 0 0 / 10%)


####################
# NAVIGATION BUTTONS
####################

# button_return_to_clima:
#   type: 'custom:button-card'
#   template: header_button_menu
#   name: Indietro
#   tap_action:
#     action: navigate
#     navigation_path: /lovelace-kairoshub/clima

button_go_to_program:
  type: 'custom:button-card'
  template: icon_state_header
  icon: '[[[ return "mdi:numeric-" + variables.progId + "-box-outline"]]]'
  # label: '[[[ return "Prog " + variables.progId]]]'
  # color: auto
  tap_action:
    action: navigate
    navigation_path: '[[[ return "/lovelace-kairoshub/clima-p" + variables.progId]]]'
  styles:
    card:
      # - box-shadow: 1px 5px 8px rgba(0, 0, 0, 0.3)
      # - padding: 5px
      - width: 63px
      # - border-right: solid 3px
      # - border-color: var(--primary-background-color)
      - background: none

# button_go_to_prog1:
#   type: 'custom:button-card'
#   template: icon_state_header
#   entity: input_boolean.heater_program1
#   icon: mdi:numeric-1-box-outline
#   label: Prog 1
#   color: auto
#   tap_action:
#     action: navigate
#     navigation_path: /lovelace-kairoshub/clima-p1
#   styles:
#     card:
#       - box-shadow: 1px 5px 8px rgba(0, 0, 0, 0.3)
#       - padding: 5px
#       - width: 63px
#       - background: rgb(255, 255, 255)

# button_go_to_prog2:
#   type: 'custom:button-card'
#   template: icon_state_header
#   entity: input_boolean.heater_program2
#   icon: mdi:numeric-2-box-outline
#   label: Prog 2
#   color: auto
#   tap_action:
#     action: navigate
#     navigation_path: /lovelace-kairoshub/clima-p2
#   styles:
#     card:
#       - box-shadow: 1px 5px 8px rgba(0, 0, 0, 0.3)
#       - padding: 5px
#       - width: 63px
#       - background: rgb(255, 255, 255)

# button_go_to_prog3:
#   type: 'custom:button-card'
#   template: icon_state_header
#   entity: input_boolean.heater_program3
#   icon: mdi:numeric-3-box-outline
#   label: Prog 3
#   color: auto
#   tap_action:
#     action: navigate
#     navigation_path: /lovelace-kairoshub/clima-p3
#   styles:
#     card:
#       - box-shadow: 1px 5px 8px rgba(0, 0, 0, 0.3)
#       - padding: 5px
#       - width: 63px
#       - background: rgb(255, 255, 255)

# button_go_to_prog4:
  # type: 'custom:button-card'
  # template: icon_state_header
  # entity: input_boolean.heater_program4
  # icon: mdi:numeric-4-box-outline
  # label: Prog 4
  # color: auto
  # tap_action:
  #   action: navigate
  #   navigation_path: /lovelace-kairoshub/clima-p4
  # styles:
  #   card:
  #     - box-shadow: 1px 5px 8px rgba(0, 0, 0, 0.3)
  #     - padding: 5px
  #     - width: 63px
  #     - background: rgb(255, 255, 255)

button_return_to_program:
  type: 'custom:button-card'
  template: button_go_back
  tap_action:
    action: navigate
    navigation_path: '[[[window.history.back()]]]'

# button_return_to_program1:
#   type: 'custom:button-card'
#   template: header_button_menu
#   name: Indietro
#   tap_action:
#     action: navigate
#     navigation_path: /lovelace-kairoshub/clima-p1

# button_return_to_program2:
#   type: 'custom:button-card'
#   template: header_button_menu
#   name: Indietro
#   tap_action:
#     action: navigate
#     navigation_path: /lovelace-kairoshub/clima-p2

# button_return_to_program3:
#   type: 'custom:button-card'
#   template: header_button_menu
#   name: Indietro
#   tap_action:
#     action: navigate
#     navigation_path: /lovelace-kairoshub/clima-p3

# button_return_to_program4:
#   type: 'custom:button-card'
#   template: header_button_menu
#   name: Indietro
#   tap_action:
#     action: navigate
#     navigation_path: /lovelace-kairoshub/clima-p4

button_return_to_settings:
  type: 'custom:button-card'
  template: button_go_back
  tap_action:
    action: navigate
    navigation_path: '[[[window.history.back()]]]'
button_go_back:
  type: 'custom:button-card'
  template: header_button_menu
  name: Indietro
  tap_action:
    action: navigate
    navigation_path: '[[[window.history.back()]]]'
  styles:
    card:
      - width: 150px
      - background: none
      - box-shadow: none
    name:
      - color: '#f4f4f4'
button_go_to_zone:
  type: 'custom:button-card'
  show_label: true
  tap_action:
    action: navigate
    navigation_path: '[[[return "/lovelace-kairoshub/"+ variables.navigation_path]]]'
  styles:
    card:
      - box-shadow: 1px 5px 8px rgba(0, 0, 0, 0.3)
      - height: 50px
      - width: 125px

####################
# CLIMA
clima_tv_detail:
  type: 'custom:button-card'
  icon: 'mdi:texture-box'
  tap_action:
    action: none
  styles:
    card:
      # - display: >
      #     [[[
      #       if ( `${states[ variables.visibility ].state}` != 'on') return 'none !important';
      #         return 'flex';
      #     ]]]
      # - background: rgb(245,245,245)
      - padding: 5px
      - color: var(--primary-text-color)
      - font-size: 10px
      - text-transform: capitalize
      - box-shadow: 1px 5px 8px rgba(0, 0, 0, 0.3)
      - margin-bottom: 5px
      - margin-right: 3px
      - height: 140px
      # - border-width: 2px
      # - border-style: double
      # - border-color: >
      #     [[[
      #       if (variables.state != 'online') return 'var(--error-color)';
      #         return 'var(--active-color)';
      #     ]]]
    grid:
      - grid-template-areas: '"i header temp icon1" "content content humidity icon2 " "graph graph graph graph"'
      - grid-template-columns: 30px 2fr 1fr 30px
      - grid-template-rows: 45px 25px min-content
    name:
      - font-weight: bold
      - font-size: 16px
      - align-self: middle
      - justify-self: start
      - padding-bottom: 4px
      - padding-right: 5px
      - padding-top: 5px
      - grid-area: header
    img_cell:
      - justify-content: start
      - align-items: start
      - margin: none
      - grid-area: i
    icon:
      - color: var(--paper-item-icon-color)
          # [[[
          #   if (entity.state != '0') return 'var(--paper-item-icon-color)';
          #     return 'var(--active-color)'
          # ]]]
      - width: 80%
    custom_fields:
      temp:
        - justify-self: end
        - align-self: middle
      humidity:
        - justify-self: end
        - align-self: middle
      content:
        - justify-self: start
        - align-self: middle
      graph:
        - margin-top: 2px
  custom_fields:
      temp: >
        [[[
          return `<div style="align-items: center; display: flex;">
            <span style="font-size: 18px; font-weight: 600; color: ${variables.temp_color};">${ variables.temperature }°C</span>
            <br />
            </div>
          `
        ]]]
      humidity: >
        [[[
          if (variables.humidity != "unknown" && variables.humidity != "unavailable")
            {return `<div style="align-items: center; display: flex;"><span style="font-size: 18px; font-weight: 600; color: var(--humidity-primary-color);">${ variables.humidity }%</span>
            <br />
            </div>`;}
          else return;
        ]]]
      content: >
        [[[
          return `<span style="font-size: 12px;">${ variables.lastupdate }</span>`
        ]]]
      # [[[
      #   return `
      #     <div class="tvblock_content" style="text-align: left;">
      #       <div style="padding: 2px;">
      #         <ha-icon icon="mdi:identifier" style="width: 20px;"></ha-icon>
      #         <label style="font-size: 12px; font-weight: 500 ">Dispositivo:<label>
      #         <span style="font-size: 10px;">${variables.identifier}</span>
      #       </div>
      #       <div style="padding: 2px;">
      #         <ha-icon icon="mdi:home-thermometer-outline" style="width: 18px;"></ha-icon>
      #         <label style="font-size: 12px; font-weight: 500 ">Temp comfort:<label>
      #         <span style="font-size: 10px;">${states[ variables.target_temp ].state} °C</span>
      #       </div>
      #       <div style="padding: 2px;">
      #         <ha-icon icon="mdi:valve" style="width: 18px;"></ha-icon>
      #         <label style="font-size: 12px; font-weight: 500 ">Apertura valvola:<label>
      #         <span style="font-size: 10px;">${states[ variables.valve_position ].state} %</span>
      #       </div>
      #       <div style="padding: 2px;">
      #         <ha-icon icon="mdi:battery" style="width: 18px;"></ha-icon>
      #         <label style="font-size: 12px; font-weight: 500 ">Batteria:<label>
      #         <span style="font-size: 10px;">${states[ variables.valve_battery ].state} %</span>
      #       </div>
      #     </div>
      #   `
      # ]]]

clima_zones_detail:
  type: 'custom:button-card'
  template: clima_tv_detail
  styles:
    card:
      - height: 100px
    grid:
      - grid-template-areas: '"i header temp icon1" "content content humidity icon2"'
      - grid-template-columns: 30px 2fr 1fr 30px
      - grid-template-rows: auto
    custom_fields:
      temp:
        - justify-self: end
      humidity:
        - justify-self: end

light_detail:
  icon: mdi:lightbulb
  size: 75%
  tap_action:
    action: none
  styles:
    grid:
      - grid-template-areas: '"i n" "i n'
      - grid-template-rows: 30px auto
      - grid-template-columns: 55px 1fr
    card:
      - padding: 5px
      - color: var(--primary-text-color)
      - font-size: 10px
      - text-transform: capitalize
      - box-shadow: 1px 5px 8px rgba(0, 0, 0, 0.3)
      - margin-bottom: 5px
      - margin-right: 3px
      - height: 90px
      - width: 237px
    name:
      - font-weight: bold
      - font-size: 16px
      - align-self: middle
      - justify-self: start
      - padding-bottom: 4px
      - padding-right: 5px
      - padding-top: 5px
    img_cell:
      - justify-content: start
      - margin-left: 10px
      - width: 60px
      - height: 50px

light_program:
  styles:
    grid:
      - grid-template-areas: '"label select days time"'
      - grid-template-columns: 150px 140px 100px 1fr
    card:
      - height: auto
      - width: 750px
      - padding: 0px
    custom_fields:
      select:
        - margin-bottom: 19px
      days:
        - margin-bottom: 19px
      time:
        - margin-top: 10px
        - margin-left: 30px

icon_header:
  layout: icon_name
  styles:
    card:
      - box-shadow: 1px 5px 8px rgba(0, 0, 0, 0.3)
    grid:
      - grid-template-areas: '"i n"'
      - grid-template-columns: 60px 1fr
    name:
      - font-weight: bold
      - font-size: 16px
      - justify-self: start
      - padding-bottom: 4px
      - padding-right: 5px
      - padding-top: 5px
    img_cell:
      - justify-content: start
      - align-items: start
      - margin: none
      - grid-area: i
    icon:
      - color: var(--paper-item-icon-color)

program_page_grid:
  styles:
    grid:
      - grid-template-areas: '"header" "days" "commands"'
      - grid-template-columns: 1fr
      - grid-template-rows: min-content min-content min-content
      - justify-items: center
      - row-gap: 10px
    name:
      - font-weight: bold
      - font-size: 16px
    custom_fields:
      header:
        - justify-self: start
      commands:
        - width: 100%
        - align-self: middle
      days:
        - margin-left: 3px
        - margin-right: 3px

button_grid_2:
  styles:
    grid:
      - grid-template-areas: '"i n n n" "b1 b1 b2 b2"'
      - grid-template-columns: 1fr 1fr 1fr 1fr
      - grid-template-rows: min-content min-content
      - justify-items: center
      - row-gap: 10px
    name:
      - font-weight: bold
      - font-size: 16px
    img_cell:
      - justify-content: start
      - align-items: start
      - margin: none
      - grid-area: i
    icon:
      - color: var(--paper-item-icon-color)

button_grid_settings:
  template: grid_style
  styles:
    grid:
      - grid-template-areas: '"header header header header" "b1 b2 b3 b4" "b5 b6 b7 b8"'
      - grid-template-columns: auto
      - grid-template-rows: min-content min-content min-content
      - justify-items: center
      - align-items: start
      - column-gap: 0px
      - row-gap: 10px
    custom_fields:
      header:
        - justify-self: start

assistance_grid:
  template: grid_style
  styles:
    grid:
      - grid-template-areas: '"header header" "system_data assistance" "system_data kairos_info"'
      - grid-template-columns: 1fr 55%
      - grid-template-rows: 50px min-content 145px
      - justify-items: start
      - align-items: start
      - column-gap: 10px
      - row-gap: 10px
      - margin-right: 10px
      - margin-left: 10px
    custom_fields:
      system_data:
        - justify-self: stretch
      assistance:
        - display: grid
        - justify-self: stretch
      kairos_info:
        - text-align: start

assistance_info:
  styles:
    card:
      - color: var(--primary-text-color)
      #- font-size: 10px
      - text-transform: capitalize
      - padding: 12px 16px 16px
    grid:
      - grid-template-areas: '"i header" "content content"'
      - grid-template-columns: 30px 1fr
      - grid-template-rows: min-content 1fr
    name:
      - place-self: start
      - grid-area: header
      - line-height: 48px
      - font-size: 20px
      - font-weight: 500
      - color: var(--ha-card-header-color)
      - padding-left: 5px
    img_cell:
      - justify-content: start
      - align-items: start
      - margin: none
      - grid-area: i
    icon:
      - color: var(--ha-card-header-color)
      - width: 80%
    content:
      - font-weight: bold
  custom_fields:
    content: >
      [[[
        return `
          <div class="assistance_content" style="text-align: left; font-size: 12px">

            <div>
              <ha-icon icon="mdi:account" style="width: 24px; padding:5px; color: var(--ha-card-header-color);"></ha-icon>
              <label style="font-weight: bold ">Intestatario impianto:</label>
              <span > ${ states[ variables.systemOwner ].state} </span>
            </div>

            <div>
              <ha-icon icon="mdi:identifier" style="width: 24px; padding:5px; color: var(--ha-card-header-color);"></ha-icon>
              <label style="font-weight: bold; ">Identificativo impianto:</label>
              <span > ${ states[ variables.systemCode ].state} </span>
            </div>

            <div>
              <ha-icon icon="mdi:key" style="width: 24px; padding:5px; color: var(--ha-card-header-color);"></ha-icon>
              <label style="font-weight: bold; ">Chiave impianto:</label>
              <span > ${ states[ variables.systemKey ].state} </span>
            </div>
            <br />

            <div>
              <ha-icon icon="mdi:home-assistant" style="width: 24px; padding:5px; color: var(--ha-card-header-color);"></ha-icon>
              <label style="font-weight: bold ">Stato impianto:</label>
              <span > ${ states[ variables.systemState ].state} </span>
            </div>

            <div>
              <ha-icon icon="mdi:cellphone-arrow-down" style="width: 24px; padding:5px; color: var(--ha-card-header-color);"></ha-icon>
              <label style="font-weight: bold ">Versione software:</label>
              <span > ${ states[ variables.kairoshubSwVersion ].state} </span>
            </div>

          </div>
        `
      ]]]

grid_style:
  styles:
    card:
      - background: none
      - padding-top: 15px

entities_grid:
  template: grid_style
  styles:
    grid:
      - grid-template-areas: '"header" "entities" "commandbar'
      - grid-template-columns: auto
      - grid-template-row: auto
      - align-items: start
      - column-gap: 0px
      - row-gap: 10px
    custom_fields:
      header:
        - justify-self: start
      entities:
        - text-align: start
        - height: 290px

clima_zone_grid:
  template: grid_style
  styles:
    grid:
      - grid-template-areas: '"header header" "zones zones" "commandbar commandbar"'
      - grid-template-columns: 1fr 1fr
      - grid-auto-rows: auto
      - row-gap: 3px
      - column-gap: 10px
      - margin-left: 10px
      - margin-right: 10px
    custom_fields:
      header:
        - margin-bottom: 2px
        - margin-left: -10px
        - height: 46px
      zones:
        - height: 307px

panel_grid:
  template: grid_style
  styles:
    card:
      - background: none
      - padding-top: 15px
    grid:
      - grid-template-areas: '"header header" "content content" "commandbar commandbar"'
      - grid-template-columns: 1fr 1fr
      - grid-auto-rows: auto
      - row-gap: 3px
      - column-gap: 10px
      - margin-left: 10px
      - margin-right: 10px
    custom_fields:
      header:
        - margin-bottom: 2px
        - margin-left: -10px
        - height: 46px
      content:
        - height: 302px
        - margin-top: 5px

zone_table:
  template: grid_style
  styles:
    grid:
      - grid-template-areas: '"header header header" "warning warning warning" "list1  list2 ." "commandbar commandbar commandbar"'
      - grid-template-columns: auto
      - grid-template-rows: 1fr 80px 192px min-content
      - align-items: start
      - row-gap: 5px
    custom_fields:
      warning:
        - justify-self: stretch
        - text-align-last: start
      list1:
        - margin-left: 40px

zone_name:
  styles:
    card:
      - background: none
      - padding: 3px
      - margin-left: 5px
      - width: 250px
  tap_action:
    action: none

graph:
  styles:
    custom_fields:
      graph:
        - overflow: unset
    card:
      - overflow: unset
      - padding-top: 0px
    grid:
      - grid-template-areas: '"n" "graph"'
      - grid-template-columns: 1fr
      - grid-template-rows: auto auto

settings_card:
  template: button_hold
  styles:
    card:
      - width: 165px
      - height: 115px
      - box-shadow: 1px 5px 8px rgba(0, 0, 0, 0.3)

command_bar:
  styles:
    grid:
      - grid-template-areas: '"commands"'
    card:
      - margin-top: 0.5px
      - margin-bottom: 0px
      # - justify-content: space-evenly
      - box-shadow: 1px -1px 8px rgba(0, 0, 0, 0.3)
      - background: '#333333'
      - text-color: white
      # - border-top: solid 1px #3377b5
      # - border-style: rgb(210,210,210)
    custom_fields:
      commands:
        - margin-top: 3px
        - height: 60px