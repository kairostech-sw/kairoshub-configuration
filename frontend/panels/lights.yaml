type: "custom:button-card"
template: basic_page_layout
triggers_update:
  - input_boolean.lights_program1_on
  - input_boolean.lights_program2_on
  - input_boolean.lights_program3_on
  - input_boolean.lights_program4_on
custom_fields:
  header:
    card:
      type: "custom:button-card"
      template: header_page_text
      icon: "mdi:lightbulb"
      label: "Luci /"
      name: >
        [[[
          var input = `input_boolean.lights_program`;
          var label = "LUCI"
          for (var i=1; i<3; i++) {
            if (states[input+`${i}_on`].state === "on") {
              label += ` (PROGRAMMA ${i} ATTIVO)`;
            }
          }

          return label;
        ]]]
  commandbar:
    card:
      type: "custom:button-card"
      template: command_bar
      style: |
        ha-card.button-card-main {
          padding: 0px !important
        }
      custom_fields:
        commands:
          card:
            type: horizontal-stack
            cards:
              - type: "custom:button-card"
                name: Programmazione Luci
                styles:
                  card:
                    - background: none
                    - color: "#f4f4f4"
                    - box-shadow: none
                    - margin-left: 10px
                    - width: 200px
                style: |
                  :host {
                    align-self: center;
                  }
                tap_action:
                  action: none
              - type: "custom:button-card"
                template: button_go_to_program
                entity: input_boolean.lights_program1
                variables:
                  progId: "1"
                  navigation_path: "lights-program1"
              - type: "custom:button-card"
                template: button_go_to_program
                entity: input_boolean.lights_program2
                variables:
                  progId: "2"
                  navigation_path: "lights-program2"
  content:
    card:
      type: vertical-stack
      cards:
        - type: conditional
          conditions:
            - entity: binary_sensor.lz100_state
              state_not: "off"
          card:
            type: "custom:button-card"
            template: lights_expander_nightzone
            variables:
              zoneId: 100
              icon: "mdi:weather-night"
        - type: conditional
          conditions:
            - entity: binary_sensor.lz200_state
              state_not: "off"
          card:
            type: "custom:button-card"
            template: lights_expander_dayzone
            variables:
              zoneId: 200
              icon: "mdi:weather-sunny"
        - type: conditional
          conditions:
            - entity: binary_sensor.lz300_state
              state_not: "off"
          card:
            type: "custom:button-card"
            template: lights_expander_outdoor
            variables:
              zoneId: 300
              icon: "mdi:fence"
