type: 'custom:button-card'
styles:
  card:
    - background: none
    - padding-top: 15px
  grid:
    - grid-template-areas: '"headersx headerdx"  "contentsx  contentdx"'
    - grid-template-columns: 1fr 35%
    - grid-template-rows: 1fr min-content
    - align-items: start
    - row-gap: 5px
    # - column-gap: 1.5%
  custom_fields:
    headerdx:
      - margin-right: 10px
    contentsx:
      - margin-left: 10px
      - margin-right: 7px
    contentdx:
      - margin-right: 7px
custom_fields:
  headersx:
    card:
      type: 'custom:button-card'
      entity: binary_sensor.heater_auto
      layout: vertical
      template: header_page_text
      icon: 'mdi:thermometer'
      name: 'CLIMA'
      label: 'Clima /'
  headerdx:
    card:
      type: 'custom:button-card'
      template: icon_header
      name: Impostazioni Clima
      icon: 'mdi:cog'
      tap_action:
        action: navigate
        navigation_path: /lovelace-kairoshub/impostazioni-riscaldamento
  contentsx:
    card:
      type: vertical-stack
      cards:
        - type: horizontal-stack
          cards:
          - type: 'custom:button-card'
            # entity: 'sensor.tz100'
            template: 'clima_tv_detail'
            name: >
              [[[
                return states["input_text.zn100"].state;
              ]]]
            variables:
              temperature: >
                [[[
                  return states["sensor.tz100"].state;
                ]]]
              humidity: >
                [[[
                  return states["sensor.hz100"].state;
                ]]]
              # visibility: input_boolean.zn_100
              # state: >
              #   [[[
              #     return states["sensor.tz100_state"].state;
              #     ]]]
              lastupdate: >
                [[[
                  var datetime =  states["sensor.tz100"].last_changed.split("T");
                  var localtime = states["sensor.time"].state.split(":")[0];
                  var date = datetime[0].split("-");
                  date = date[2]+"/"+date[1]+"/"+date[0];
                  var time = datetime[1].split(":");
                  time[0] = +time[0]+(localtime-time[0]);
                  time = time[0]+":"+time[1];
                  return date+" "+time;
                ]]]
            tap_action:
              action: navigate
              navigation_path: /lovelace-kairoshub/nightzone
          - type: 'custom:button-card'
            # entity: 'sensor.tv01_lastupdate'
            template: 'clima_tv_detail'
            name: >
              [[[
                return states["input_text.zn200"].state;
              ]]]
            variables:
              temperature: >
                [[[
                  return states["sensor.tz200"].state;
                ]]]
              humidity: >
                [[[
                  return states["sensor.hz200"].state;
                ]]]
              # visibility: input_boolean.zn_200
              # state: >
              #   [[[
              #     return states["sensor.tz200_state"].state;
              #     ]]]
              lastupdate: >
                [[[
                  var datetime =  states["sensor.tz200"].last_changed.split("T");
                  var localtime = states["sensor.time"].state.split(":")[0];
                  var date = datetime[0].split("-");
                  date = date[2]+"/"+date[1]+"/"+date[0];
                  var time = datetime[1].split(":");
                  time[0] = +time[0]+(localtime-time[0]);
                  time = time[0]+":"+time[1];
                  return date+" "+time;
                ]]]
            tap_action:
              action: navigate
              navigation_path: /lovelace-kairoshub/dayzone
  contentdx:
    card:
      type: vertical-stack
      cards:
        - type: vertical-stack
          cards:
            - type: 'custom:button-card'
              template:
                - icon_clima
                - icon_header
                - button_grid_4
              name: Programmi Riscaldamento
              styles:
                card:
                  - box-shadow: 0px 0px 0px rgba(0, 0, 0, 0)
                  - background: none
              custom_fields:
                b1:
                  card:
                    type: vertical-stack
                    cards:
                      - type: 'custom:button-card'
                        template: button_go_to_program
                        entity: input_boolean.heater_program1
                        variables:
                          progId: '1'
                b2:
                  card:
                    type: vertical-stack
                    cards:
                      - type: 'custom:button-card'
                        template: button_go_to_program
                        entity: input_boolean.heater_program2
                        variables:
                          progId: '2'
                b3:
                  card:
                    type: vertical-stack
                    cards:
                      - type: 'custom:button-card'
                        template: button_go_to_program
                        entity: input_boolean.heater_program3
                        variables:
                          progId: '3'
                b4:
                  card:
                    type: vertical-stack
                    cards:
                      - type: 'custom:button-card'
                        template: button_go_to_program
                        entity: input_boolean.heater_program4
                        variables:
                          progId: '4'
        - type: vertical-stack
          cards:
            - type: 'custom:button-card'
              template:
                - icon_header
                - button_grid_2
              icon: 'mdi:dots-grid'
              name: Zone di Riscaldamento
              styles:
                card:
                  - box-shadow: 0px 0px 0px rgb(0,0,0)
                  - background: none
              custom_fields:
                b1:
                  card:
                    type: vertical-stack
                    cards:
                      - type: 'custom:button-card'
                        label: Zona Notte
                        template: button_go_to_zone
                        variables:
                          navigation_path: >
                            [[[
                              return "nightzone";
                            ]]]
                b2:
                  card:
                    type: vertical-stack
                    cards:
                      - type: 'custom:button-card'
                        label: Zona Giorno
                        template: button_go_to_zone
                        variables:
                          navigation_path: >
                            [[[
                              return "dayzone";
                            ]]]
