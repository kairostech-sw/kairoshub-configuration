type: custom:button-card
template: panel_grid
styles:
  custom_fields:
    content:
      - justify-self: center
      - overflow: auto
card_mod:
  style: |
    #content::-webkit-scrollbar {
      display: none !important;
    }
custom_fields:
  header:
    card:
      type: 'custom:button-card'
      layout: vertical
      template:
        - header_page_text
      icon: 'mdi:lightbulb'
      name: 'LUCI'
      label: Luci
  commandbar:
    card:
      type: 'custom:button-card'
      template: command_bar
      style: |
        ha-card.button-card-main {
          padding: 0px !important
        }
        div#container {
          justify-items: right;
        }
      styles:
        card:
          - width: 800px
          - margin-left: -10px
      custom_fields:
        commands:
          card:
            type: horizontal-stack
            cards:
              - type: 'custom:button-card'
                template: button_go_back
                style: |
                  :host {
                    align-self: center;
                  }
  content:
    card:
      type: vertical-stack
      cards:
        - type: conditional
          conditions:
            - entity: binary_sensor.lz100_state
              state: "off"
            - entity: binary_sensor.lz200_state
              state: "off"
            - entity: binary_sensor.lz300_state
              state: "off"
          card:
            type: 'custom:button-card'
            template: no_background
            name: >
              [[[
                return `
                <ha-alert alert-type="warning" style="justify-self: center;">
                  Non ci sono luci attive </br>
                </ha-alert>`;
              ]]]
            tap_action:
                action: none
        - type: conditional
          conditions:
            - entity: binary_sensor.lz100_state
              state_not: "off"
          card:
            type: custom:button-card
            template: light_program
            custom_fields:
              label:
                card:
                  type: custom:button-card
                  name: '[[[return states["input_text.zn100"].state;]]]'
                  layout: icon_name
                  icon: mdi:lightbulb
                  entity: light.group_lz100
                  size: 75%
                  state:
                    - value: 'off'
                      color: black
                    - value: 'on'
                      color: >
                        [[[
                          if (states["input_select.light_type"].state == "color")
                          {
                            if (states["light.group_lz100"].attributes.rgb_color != undefined) {
                            var color = states["light.group_lz100"].attributes.rgb_color
                            return "rgb("+color[0]+","+color[1]+","+color[2]+")";
                            } 
                          }
                          else return "#DCA200";
                        ]]]
                  tap_action:
                    action: call-service
                    service: light.toggle
                    service_data:
                      entity_id: light.group_lz100
                  # hold_action:
                  #   action: navigate
                  #   navigation_path: /lovelace-kairoshub/lights-program1-zone1
              select:
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:button-card
                      icon: mdi:chevron-up
                      size: 13%
                      styles:
                        card:
                          - padding: 0px
                      tap_action:
                        action: call-service
                        service: input_select.select_next
                        service_data:
                          entity_id: input_select.zn100
                    - type: 'custom:button-card'
                      entity: input_select.zn100
                      tap_action:
                        action: none
                      show_state: true
                      size: 17%
                      state:
                        - value: 'Disattivo'
                          color: "#F32000"
                          icon: mdi:close-circle-outline
                        - value: 'Programmato'
                          color: "#009213"
                          icon: mdi:alarm
                        - value: 'Automatico'
                          color: "#FFB600"
                          icon: mdi:weather-sunny
                    - type: custom:button-card
                      icon: mdi:chevron-down
                      size: 13%
                      styles:
                        card:
                          - padding: 0px
                      tap_action:
                        action: call-service
                        service: input_select.select_previous
                        service_data:
                          entity_id: input_select.zn100
              days:
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:button-card
                      icon: mdi:chevron-up
                      size: 18%
                      styles:
                        card:
                          - padding: 0px
                      tap_action:
                        action: call-service
                        service: input_select.select_next
                        service_data:
                          entity_id: input_select.zn100_days
                    - type: 'custom:button-card'
                      entity: input_select.zn100_days
                      tap_action:
                        action: none
                      show_state: true
                      size: 25%
                      icon: mdi:calendar
                      color: >
                        [[[
                          if (states['input_select.zn100'].state == "Programmato")
                            return "#009213";
                          return "var(--disabled-text-color)";
                        ]]]
                    - type: custom:button-card
                      icon: mdi:chevron-down
                      size: 18%
                      styles:
                        card:
                          - padding: 0px
                      tap_action:
                        action: call-service
                        service: input_select.select_previous
                        service_data:
                          entity_id: input_select.zn100_days
              time:
                card:
                  type: horizontal-stack
                  cards:
                    - type: custom:time-picker-card
                      entity: input_datetime.lights_nightzone_on_program1
                      minute_step: 15
                      layout:
                        embedded: true
                        align_controls: right
                      style: 
                        .: |
                          :host {
                          {% if not is_state('input_select.zn100', 'Programmato') %}
                            pointer-events: none;
                          {% endif %}
                          }
                          state-badge {
                            display: none;
                          }
                          .time-picker-row.embedded {
                            flex-direction: column;
                          }
                        time-unit: 
                          $: |
                            .time-input {
                              {% if not is_state('input_select.zn100', 'Programmato') %}
                                pointer-events: none;
                                background-color: var(--disabled-text-color) !important; 
                              {% endif %} 
                            }
                    - type: custom:time-picker-card
                      entity: input_datetime.lights_nightzone_off_program1
                      minute_step: 15
                      layout:
                        embedded: true
                        align_controls: right
                      style: 
                        .: |
                          :host {
                          {% if not is_state('input_select.zn100', 'Programmato') %}
                            pointer-events: none;
                          {% endif %}
                          }
                          state-badge {
                            display: none;
                          }
                          .time-picker-row.embedded {
                            flex-direction: column;
                          }
                        time-unit: 
                          $: |
                            .time-input {
                              {% if not is_state('input_select.zn100', 'Programmato') %}
                                pointer-events: none;
                                background-color: var(--disabled-text-color) !important; 
                              {% endif %} 
                            }
        - type: conditional
          conditions:
            - entity: binary_sensor.lz200_state
              state_not: "off"
          card:
            type: custom:button-card
            template: light_program
            custom_fields:
              label:
                card:
                  type: custom:button-card
                  name: '[[[return states["input_text.zn200"].state;]]]'
                  layout: icon_name
                  icon: mdi:lightbulb
                  entity: light.group_lz200
                  size: 75%
                  state:
                    - value: 'off'
                      color: black
                    - value: 'on'
                      color: >
                        [[[
                          if (states["input_select.light_type"].state == "color")
                          {
                            if (states["light.group_lz200"].attributes.rgb_color != undefined) {
                            var color = states["light.group_lz200"].attributes.rgb_color
                            return "rgb("+color[0]+","+color[1]+","+color[2]+")";
                            } 
                          }
                          else return "#DCA200";
                        ]]]
                  tap_action:
                    action: none
              select:
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:button-card
                      icon: mdi:chevron-up
                      size: 13%
                      styles:
                        card:
                          - padding: 0px
                      tap_action:
                        action: call-service
                        service: input_select.select_next
                        service_data:
                          entity_id: input_select.zn200
                    - type: 'custom:button-card'
                      entity: input_select.zn200
                      tap_action:
                        action: none
                      show_state: true
                      size: 17%
                      state:
                        - value: 'Disattivo'
                          color: "#F32000"
                          icon: mdi:close-circle-outline
                        - value: 'Programmato'
                          color: "#009213"
                          icon: mdi:alarm
                        - value: 'Automatico'
                          color: "#FFB600"
                          icon: mdi:weather-sunny
                    - type: custom:button-card
                      icon: mdi:chevron-down
                      size: 13%
                      styles:
                        card:
                          - padding: 0px
                      tap_action:
                        action: call-service
                        service: input_select.select_previous
                        service_data:
                          entity_id: input_select.zn200
              days:
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:button-card
                      icon: mdi:chevron-up
                      size: 18%
                      styles:
                        card:
                          - padding: 0px
                      tap_action:
                        action: call-service
                        service: input_select.select_next
                        service_data:
                          entity_id: input_select.zn200_days
                    - type: 'custom:button-card'
                      entity: input_select.zn200_days
                      tap_action:
                        action: none
                      show_state: true
                      size: 25%
                      icon: mdi:calendar
                      color: >
                        [[[
                          if (states['input_select.zn200'].state == "Programmato")
                            return "#009213";
                          return "var(--disabled-text-color)";
                        ]]]
                    - type: custom:button-card
                      icon: mdi:chevron-down
                      size: 18%
                      styles:
                        card:
                          - padding: 0px
                      tap_action:
                        action: call-service
                        service: input_select.select_previous
                        service_data:
                          entity_id: input_select.zn200_days
              time:
                card:
                  type: horizontal-stack
                  cards:
                    - type: custom:time-picker-card
                      entity: input_datetime.lights_dayzone_on_program1
                      minute_step: 15
                      layout:
                        embedded: true
                        align_controls: right
                      style: 
                        .: |
                          :host {
                          {% if not is_state('input_select.zn200', 'Programmato') %}
                            pointer-events: none;
                          {% endif %}
                          }
                          state-badge {
                            display: none;
                          }
                          .time-picker-row.embedded {
                            flex-direction: column;
                          }
                        time-unit: 
                          $: |
                            .time-input {
                              {% if not is_state('input_select.zn200', 'Programmato') %}
                                pointer-events: none;
                                background-color: var(--disabled-text-color) !important; 
                              {% endif %} 
                            }
                    - type: custom:time-picker-card
                      entity: input_datetime.lights_dayzone_off_program1
                      minute_step: 15
                      layout:
                        embedded: true
                        align_controls: right
                      style: 
                        .: |
                          :host {
                          {% if not is_state('input_select.zn200', 'Programmato') %}
                            pointer-events: none;
                          {% endif %}
                          }
                          state-badge {
                            display: none;
                          }
                          .time-picker-row.embedded {
                            flex-direction: column;
                          }
                        time-unit: 
                          $: |
                            .time-input {
                              {% if not is_state('input_select.zn200', 'Programmato') %}
                                pointer-events: none;
                                background-color: var(--disabled-text-color) !important; 
                              {% endif %} 
                            }
        - type: conditional
          conditions:
            - entity: binary_sensor.lz300_state
              state_not: "off"
          card:
            type: custom:button-card
            template: light_program
            custom_fields:
              label:
                card:
                  type: custom:button-card
                  name: '[[[return states["input_text.zn300"].state;]]]'
                  layout: icon_name
                  icon: mdi:lightbulb
                  entity: light.group_lz300
                  size: 75%
                  state:
                    - value: 'off'
                      color: black
                    - value: 'on'
                      color: >
                        [[[
                          if (states["input_select.light_type"].state == "color")
                          {
                            if (states["light.group_lz300"].attributes.rgb_color != undefined) {
                            var color = states["light.group_lz300"].attributes.rgb_color
                            return "rgb("+color[0]+","+color[1]+","+color[2]+")";
                            } 
                          }
                          else return "#DCA200";
                        ]]]
                  tap_action:
                    action: none
              select:
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:button-card
                      icon: mdi:chevron-up
                      size: 13%
                      styles:
                        card:
                          - padding: 0px
                      tap_action:
                        action: call-service
                        service: input_select.select_next
                        service_data:
                          entity_id: input_select.zn300
                    - type: 'custom:button-card'
                      entity: input_select.zn300
                      tap_action:
                        action: none
                      show_state: true
                      size: 17%
                      state:
                        - value: 'Disattivo'
                          color: "#F32000"
                          icon: mdi:close-circle-outline
                        - value: 'Programmato'
                          color: "#009213"
                          icon: mdi:alarm
                        - value: 'Automatico'
                          color: "#FFB600"
                          icon: mdi:weather-sunny
                    - type: custom:button-card
                      icon: mdi:chevron-down
                      size: 13%
                      styles:
                        card:
                          - padding: 0px
                      tap_action:
                        action: call-service
                        service: input_select.select_previous
                        service_data:
                          entity_id: input_select.zn300
              days:
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:button-card
                      icon: mdi:chevron-up
                      size: 18%
                      styles:
                        card:
                          - padding: 0px
                      tap_action:
                        action: call-service
                        service: input_select.select_next
                        service_data:
                          entity_id: input_select.zn300_days
                      style: 
                        .: |
                          :host {
                          {% if not is_state('input_select.zn300', 'Programmato') %}
                            pointer-events: none;
                          {% endif %}
                          }
                    - type: 'custom:button-card'
                      entity: input_select.zn300_days
                      tap_action:
                        action: none
                      show_state: true
                      size: 25%
                      icon: mdi:calendar
                      color: >
                        [[[
                          if (states['input_select.zn300'].state == "Programmato")
                            return "#009213";
                          return "var(--disabled-text-color)";
                        ]]]
                    - type: custom:button-card
                      icon: mdi:chevron-down
                      size: 18%
                      styles:
                        card:
                          - padding: 0px
                      tap_action:
                        action: call-service
                        service: input_select.select_previous
                        service_data:
                          entity_id: input_select.zn300_days
                      style: 
                        .: |
                          :host {
                          {% if not is_state('input_select.zn300', 'Programmato') %}
                            pointer-events: none;
                          {% endif %}
                          }
              time:
                card:
                  type: horizontal-stack
                  cards:
                    - type: custom:time-picker-card
                      entity: input_datetime.lights_outdoor_on_program1
                      minute_step: 15
                      layout:
                        embedded: true
                        align_controls: right
                      style: 
                        .: |
                          :host {
                          {% if not is_state('input_select.zn300', 'Programmato') %}
                            pointer-events: none;
                          {% endif %}
                          }
                          state-badge {
                            display: none;
                          }
                          .time-picker-row.embedded {
                            flex-direction: column;
                          }
                        time-unit: 
                          $: |
                            .time-input {
                              {% if not is_state('input_select.zn300', 'Programmato') %}
                                pointer-events: none;
                                background-color: var(--disabled-text-color) !important; 
                              {% endif %} 
                            }
                    - type: custom:time-picker-card
                      entity: input_datetime.lights_outdoor_off_program1
                      minute_step: 15
                      layout:
                        embedded: true
                        align_controls: right
                      style: 
                        .: |
                          :host {
                          {% if not is_state('input_select.zn300', 'Programmato') %}
                            pointer-events: none;
                          {% endif %}
                          }
                          state-badge {
                            display: none;
                          }
                          .time-picker-row.embedded {
                            flex-direction: column;
                          }
                        time-unit: 
                          $: |
                            .time-input {
                              {% if not is_state('input_select.zn300', 'Programmato') %}
                                pointer-events: none;
                                background-color: var(--disabled-text-color) !important; 
                              {% endif %} 
                            }