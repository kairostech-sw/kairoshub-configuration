type: "custom:button-card"
template: panel_grid
custom_fields:
  header:
    card:
      type: "custom:button-card"
      template: header_page_text
      icon: "mdi:lightbulb"
      name: "LUCI"
      label: '[[[return "Luci / "+states["input_text.zn300"].state]]]'
  commandbar:
    card:
      type: "custom:button-card"
      template: command_bar
      style: |
        ha-card.button-card-main {
          padding: 0px !important
        }
        div#container {
          justify-items: right;
        }
      styles:
        card:
          - margin-left: -10px
      custom_fields:
        commands:
          card:
            type: horizontal-stack
            cards:
              - type: "custom:button-card"
                template: button_go_back
  content:
    card:
      type: vertical-stack
      cards:
        - type: conditional
          conditions:
            - entity: binary_sensor.lz301_state
              state: "off"
            - entity: binary_sensor.lz302_state
              state: "off"
            - entity: binary_sensor.lz303_state
              state: "off"
            - entity: binary_sensor.lz304_state
              state: "off"
          card:
            type: "custom:button-card"
            template: no_background
            name: >
              [[[
                return `
                <ha-alert alert-type="warning" style="justify-self: center;">
                  Non ci sono luci attive </br>
                </ha-alert>`;
              ]]]
            tap_action:
              action: none
        - type: grid
          columns: 2
          square: false
          cards:
            - <<: &inline-mod-card
                type: custom:mod-card
                style: |
                  ha-card {
                    display: inline-block;
                  }
              card:
                type: conditional
                conditions:
                  - entity: binary_sensor.lz301_state
                    state_not: "off"
                card:
                  type: "custom:button-card"
                  template: light_detail
                  entity: light.group_lz301
                  variables:
                    zoneId: 301
                  tap_action:
                    action: call-service
                    service: light.toggle
                    service_data:
                      entity_id: light.group_lz301
                  hold_action:
                    action: navigate
                    navigation_path: /lovelace-kairoshub/lights-outdoor-room1
            - <<: *inline-mod-card
              card:
                type: conditional
                conditions:
                  - entity: binary_sensor.lz302_state
                    state_not: "off"
                card:
                  type: "custom:button-card"
                  template: light_detail
                  entity: light.group_lz302
                  variables:
                    zoneId: 302
                  tap_action:
                    action: call-service
                    service: light.toggle
                    service_data:
                      entity_id: light.group_lz302
                  hold_action:
                    action: navigate
                    navigation_path: /lovelace-kairoshub/lights-outdoor-room2
            - <<: *inline-mod-card
              card:
                type: conditional
                conditions:
                  - entity: binary_sensor.lz303_state
                    state_not: "off"
                card:
                  type: "custom:button-card"
                  template: light_detail
                  entity: light.group_lz303
                  variables:
                    zoneId: 303
                  tap_action:
                    action: call-service
                    service: light.toggle
                    service_data:
                      entity_id: light.group_lz303
                  hold_action:
                    action: navigate
                    navigation_path: /lovelace-kairoshub/lights-outdoor-room3
            - <<: *inline-mod-card
              card:
                type: conditional
                conditions:
                  - entity: binary_sensor.lz304_state
                    state_not: "off"
                styles:
                  card:
                    - justify-self: center
                card:
                  type: "custom:button-card"
                  template: light_detail
                  entity: light.group_lz304
                  variables:
                    zoneId: 304
                  tap_action:
                    action: call-service
                    service: light.toggle
                    service_data:
                      entity_id: light.group_lz304
                  hold_action:
                    action: navigate
                    navigation_path: /lovelace-kairoshub/lights-outdoor-room4
