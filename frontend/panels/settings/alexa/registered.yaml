type: custom:button-card
template: setting_layout
variables:
  label: "Alexa"
custom_fields:
  commandbar:
    card:
      type: "custom:button-card"
      template: command_bar
      custom_fields:
        commands:
          card:
            type: "custom:button-card"
            template: alexa_command_bar
            custom_fields:
              integration:
                card:
                  type: horizontal-stack
                  cards:
                    - type: conditional
                      conditions:
                        - entity: input_text.alexa_auto_renew
                          state: "SI"
                      card:
                        type: "custom:button-card"
                        template:
                          - feedback_click
                          - no_background
                          - alexa_button_style
                        name: "Disattiva Rinnovo"
                        styles:
                          card:
                            - margin-left: 10px
                        tap_action:
                          confirmation:
                            text: "Sei sicuro di voler disattivare il rinnovo automatico?"
                          action: call-service
                          service: automation.trigger
                          service_data:
                            entity_id: automation.alexa_integration_renew_toggle
                    - type: conditional
                      conditions:
                        - entity: input_text.alexa_auto_renew
                          state: "NO"
                      card:
                        type: "custom:button-card"
                        template:
                          - feedback_click
                          - no_background
                          - alexa_button_style
                        name: "Attiva Rinnovo"
                        tap_action:
                          confirmation:
                            text: "Sei sicuro di voler attivare il rinnovo automatico?"
                          action: call-service
                          service: automation.trigger
                          service_data:
                            entity_id: automation.alexa_integration_renew_toggle
  content:
    card:
      type: "custom:integration-info-card"
      title: "Integrazione Alexa"
      entities:
        - entity: input_text.alexa_subscription_state
          icon: "mdi:amazon-alexa"
        - entity: input_text.alexa_subscription_activation_date
          icon: "mdi:calendar-check-outline"
          color: "green"
        - entity: input_text.alexa_subscription_renew_date
          icon: "mdi:calendar-refresh-outline"
          color: "red"
        - entity: input_text.alexa_auto_renew
          icon: "mdi:refresh-auto"
